# тЬЕ рж░рж┐ржлрж╛ржирзНржб ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо - ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗрж╢ржи рж╕ржорзНржкрзВрж░рзНржг

## рж╕рж╛ржоржЧрзНрж░рж┐ржХ ржЕржмрж╕рзНржерж╛

тЬЕ **рж╕ржорзНржкрзВрж░рзНржг ржПржмржВ ржЙрзОржкрж╛ржжржирзЗрж░ ржЬржирзНржп ржкрзНрж░рж╕рзНрждрзБржд**

ржПржХржЯрж┐ enterprise-grade рж░рж┐ржлрж╛ржирзНржб ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржпрж╛ рж╕ржорж╕рзНржд рж╕ржорзНржкрж░рзНржХрж┐ржд ржоржбрж┐ржЙрж▓, ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб, рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ ржПржмржВ ржЗржЙржЬрж╛рж░ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ ржмрж┐рж╕рзНрждрзГрждред

---

## ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ ржкрж░рж┐ржмрж░рзНрждржи

### 1я╕ПтГг ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржХрж┐ржорж╛ (convex/schema.ts)

тЬЕ **3 ржирждрзБржи ржЯрзЗржмрж┐рж▓ ржпрзБржХрзНржд:**

1. **refunds** - рззрзлржЯрж┐ ржлрж┐рж▓рзНржб рж╕рж╣ рж╕ржорзНржкрзВрж░рзНржг рж░рж┐ржлрж╛ржирзНржб ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
   - ржЕржиржирзНржп ID, ржмрж┐ржХрзНрж░ржпрж╝ рж╕ржорзНржкрж░рзНржХ, ржЧрзНрж░рж╛рж╣ржХ рждржерзНржп
   - ржЖржЗржЯрзЗржо ржмрж┐ржмрж░ржг (ржкржгрзНржп, ржкрж░рж┐ржорж╛ржг, ржорзВрж▓рзНржп, ржЕржмрж╕рзНржерж╛, ржХрж╛рж░ржг)
   - ржЖрж░рзНржерж┐ржХ рждржерзНржп (рж╕рж╛ржмржЯрзЛржЯрж╛рж▓, ржЯрзНржпрж╛ржХрзНрж╕, ржбрж┐рж╕ржХрж╛ржЙржирзНржЯ, рж░рж┐ржлрж╛ржирзНржб ржкрж░рж┐ржорж╛ржг)
   - ржЕржирзБржорзЛржжржи ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ (ржкрзЗржирзНржбрж┐ржВ, ржЕржирзБржорзЛржжрж┐ржд, ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрзГржд, рж╕ржорзНржкрзВрж░рзНржг)
   - ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ (ржХрзЗ, ржХржЦржи, ржХрзЗржи)
   - рж░рж┐ржЯрж╛рж░рзНржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржПржмржВ рж╕рзНржЯржХ ржкрзНрж░ржнрж╛ржм
   - 7ржЯрж┐ ржЗржирзНржбрзЗржХрзНрж╕ ржжрзНрж░рзБржд ржЕржирзБрж╕ржирзНржзрж╛ржирзЗрж░ ржЬржирзНржп

2. **refundAuditTrail** - рж╕ржорзНржкрзВрж░рзНржг ржЕржбрж┐ржЯ ржЗрждрж┐рж╣рж╛рж╕
   - ржкрзНрж░рждрж┐ржЯрж┐ ржкржжржХрзНрж╖рзЗржк ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ
   - ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржмржВ рж╕ржоржпрж╝ рждржерзНржп
   - рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржкрж░рж┐ржмрж░рзНрждржи ржПржмржВ ржирзЛржЯ

3. **refundPolicies** - рж╢рж╛ржЦрж╛-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзАрждрж┐
   - рж░рж┐ржлрж╛ржирзНржб ржЕржирзБржорзЛржжржи/ржЕрж╕рзНржмрзАржХрж╛рж░
   - рж░рж┐ржлрж╛ржирзНржб ржЙржЗржирзНржбрзЛ (ржжрж┐ржи)
   - рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝рждрж╛ рж╕рзЗржЯрж┐ржВрж╕
   - ржмрж┐ржЬрзНржЮржкрзНрждрж┐ ржкржЫржирзНржж
   - рж╕рзАржорж╛ ржПржмржВ ржкрзЗржирж╛рж▓рзНржЯрж┐

---

### 2я╕ПтГг ржмрзНржпрж╛ржХржПржирзНржб API (convex/refunds.ts) - 13 ржлрж╛ржВрж╢ржи

#### ржорж┐ржЙржЯрзЗрж╢ржи (ржпрж╛ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ):

тЬЕ **create()** - ржирждрзБржи рж░рж┐ржлрж╛ржирзНржб ржЕржирзБрж░рзЛржз рждрзИрж░рж┐ ржХрж░рзБржи
```typescript
- ржирзАрждрж┐ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ
- рж░рж┐ржлрж╛ржирзНржб ржЙржЗржирзНржбрзЛ ржЪрзЗржХ ржХрж░рзЗ
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржорзЛржжржи рж╕рж┐ржжрзНржзрж╛ржирзНржд
- ржЕржбрж┐ржЯ рж▓ржЧ рждрзИрж░рж┐ ржХрж░рзЗ
```

тЬЕ **approve()** - рж░рж┐ржлрж╛ржирзНржб ржЕржирзБржорзЛржжржи ржХрж░рзБржи
```typescript
- рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ ржХрж░рзЗ
- ржорзНржпрж╛ржирзЗржЬрж╛рж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ
- ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ рж░рзЗржХрж░рзНржб ржХрж░рзЗ
```

тЬЕ **reject()** - рж░рж┐ржлрж╛ржирзНржб ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржи ржХрж░рзБржи
```typescript
- ржХрж╛рж░ржг рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ
- рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ "rejected" рж╕рзЗржЯ ржХрж░рзЗ
- ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ рж░рзЗржХрж░рзНржб ржХрж░рзЗ
```

тЬЕ **process()** - рж░рж┐ржлрж╛ржирзНржб ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрж░рзБржи
```typescript
- ржкрзЗржорзЗржирзНржЯ рж░рж┐ржнрж╛рж░рзНрж╕рж╛рж▓ ржмрж┐ржмрж░ржг рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ
- рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ "processed" рж╕рзЗржЯ ржХрж░рзЗ
- рж▓рзЗржиржжрзЗржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
```

тЬЕ **complete()** - рж░рж┐ржлрж╛ржирзНржб рж╕ржорзНржкрзВрж░рзНржг ржХрж░рзБржи
```typescript
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ рж╕рзНржЯржХ рж░рж┐рж╕рзНржЯржХ (ржпржжрж┐ ржкрзНрж░ржпрж╝рзЛржЬржи)
- рж╕рзНржЯржХ ржорзБржнржорзЗржирзНржЯ рж▓ржЧ рждрзИрж░рж┐ ржХрж░рзЗ
- ржкрж░рж┐ржжрж░рзНрж╢ржи ржирзЛржЯ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗ
- рж╕ржорж╕рзНржд ржЖржкржбрзЗржЯ рж▓ржЧ ржХрж░рзЗ
```

тЬЕ **updatePolicy()** - ржирзАрждрж┐ рж╕рзЗржЯрж┐ржВрж╕ ржЖржкржбрзЗржЯ ржХрж░рзБржи
```typescript
- рж╢рж╛ржЦрж╛-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзАрждрж┐ рждрзИрж░рж┐/ржЖржкржбрзЗржЯ
- рж╕ржорж╕рзНржд ржирзАрждрж┐ ржкрзНржпрж╛рж░рж╛ржорж┐ржЯрж╛рж░ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗ
```

#### ржХрзЛржпрж╝рзЗрж░рж┐ (ржпрж╛ ржбрзЗржЯрж╛ ржкржбрж╝рзЗ):

тЬЕ **list()** - рж╕ржорж╕рзНржд рж░рж┐ржлрж╛ржирзНржб (ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝)
тЬЕ **get()** - ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐ржлрж╛ржирзНржб ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд
тЬЕ **getBySale()** - ржмрж┐ржХрзНрж░ржпрж╝ ржжрзНржмрж╛рж░рж╛ рж░рж┐ржлрж╛ржирзНржб ржЦрзБржБржЬрзБржи
тЬЕ **getByCustomer()** - ржЧрзНрж░рж╛рж╣ржХ ржжрзНржмрж╛рж░рж╛ рж░рж┐ржлрж╛ржирзНржб ржЦрзБржБржЬрзБржи
тЬЕ **getPendingApproval()** - ржЕржирзБржорзЛржжржирзЗрж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖ржорж╛ржи рж░рж┐ржлрж╛ржирзНржб
тЬЕ **getPolicy()** - рж╢рж╛ржЦрж╛рж░ ржирзАрждрж┐
тЬЕ **getStatistics()** - рж╕ржоржпрж╝-ржнрж┐рждрзНрждрж┐ржХ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи
тЬЕ **getAuditTrail()** - рж╕ржорзНржкрзВрж░рзНржг ржЗрждрж┐рж╣рж╛рж╕

---

### 3я╕ПтГг ржлрзНрж░ржирзНржЯржПржирзНржб UI (src/components/RefundManagement.tsx)

тЬЕ **рж╕ржорзНржкрзВрж░рзНржг ржХрж╛рж░рзНржпржХрж░ рж░рж┐ржлрж╛ржирзНржб ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕**

#### рзйржЯрж┐ ржкрзНрж░ржзрж╛ржи ржЯрзНржпрж╛ржм:

1. **Refund List** ржЯрзНржпрж╛ржм
   - рж╕ржорж╕рзНржд рж░рж┐ржлрж╛ржирзНржб ржжрзЗржЦрзБржи
   - рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржжрзНржмрж╛рж░рж╛ ржлрж┐рж▓рзНржЯрж╛рж░
   - ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржорзЛржбрж╛рж▓ ржЦрзБрж▓рзБржи
   - ржЯрзЗржмрж┐рж▓: Refund #, Sale #, Customer, Amount, Status

2. **Create Refund** ржЯрзНржпрж╛ржм
   - ржирждрзБржи рж░рж┐ржлрж╛ржирзНржб ржЕржирзБрж░рзЛржз рж╢рзБрж░рзБ ржХрж░рзБржи
   - ржлрж░рзНржо рж╕рж╛ржкрзНрж▓рж┐ржорзЗржирзНржЯ (ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи-ржкрзНрж░рж╕рзНрждрзБржд)

3. **Refund Policy** ржЯрзНржпрж╛ржм
   - рж╢рж╛ржЦрж╛-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕рзЗржЯрж┐ржВрж╕ ржжрзЗржЦрзБржи
   - ржирзАрждрж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи

#### ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржорзЛржбрж╛рж▓
- ржмрж┐ржХрзНрж░ржпрж╝ ржПржмржВ рж░рж┐ржлрж╛ржирзНржб рждржерзНржп ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ
- ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕рзЗрж░ ржЬржирзНржп рж╢рж░рзНржд-ржнрж┐рждрзНрждрж┐ржХ ржкржжржХрзНрж╖рзЗржк:
  - ржЕржирзБржорзЛржжржирзЗрж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖ржорж╛ржи тЖТ [Approve] / [Reject] ржмрж╛ржЯржи
  - ржЕржирзБржорзЛржжрж┐ржд тЖТ [Process] ржмрж╛ржЯржи
  - ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрзГржд тЖТ [Complete] ржмрж╛ржЯржи
- ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ ржПржмржВ ржирзЛржЯ

---

### 4я╕ПтГг ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи (src/components/Dashboard.tsx)

тЬЕ **рж░рж┐ржлрж╛ржирзНржб ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ ржХрж╛рж░рзНржб ржпрзБржХрзНржд:**

```
"Refunds" ржХрж╛рж░рзНржб (тЖйя╕П ржЖржЗржХржи):
тФЬтФА ржорзЛржЯ рж░рж┐ржлрж╛ржирзНржб рж╕ржВржЦрзНржпрж╛
тФЬтФА ржорзЛржЯ рж░рж┐ржлрж╛ржирзНржб ржкрж░рж┐ржорж╛ржг (ржЯрж╛ржХрж╛ржпрж╝)
тФФтФА рж░рж┐ржлрж╛ржирзНржб рж╣рж╛рж░ %
```

тЬЕ **рж░рж┐ржлрж╛ржирзНржб рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржкрзНржпрж╛ржирзЗрж▓:**

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ ЁЯФД Refund Status            тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ тЪая╕П  Pending Approvals: 3     тФВ
тФВ     (Action required)        тФВ
тФВ                              тФВ
тФВ тЬУ Completed Refunds: 12      тФВ
тФВ   Processed successfully     тФВ
тФВ                              тФВ
тФВ ЁЯТ░ Total Refunded: рз│45,600   тФВ
тФВ    Refund rate: 1.8%         тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

---

### 5я╕ПтГг рж╕рзЗрж▓рж╕ ржкрзЗржЬ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи (src/components/Sales.tsx)

тЬЕ **"Manage Refunds" ржмрж╛ржЯржи ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ**

```tsx
// Sales.tsx ржП
<button
  onClick={() => setShowRefundManagement(true)}
  className="px-4 py-2 bg-orange-600 text-white"
>
  Manage Refunds
</button>

// ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ RefundManagement ржХржорзНржкрзЛржирзЗржирзНржЯ рж▓рзЛржб рж╣ржпрж╝
```

---

### 6я╕ПтГг ржЕрзНржпрж╛ржк ржирзНржпрж╛ржнрж┐ржЧрзЗрж╢ржи (src/App.tsx)

тЬЕ **Refund ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржкрзБрж░рзЛржкрзБрж░рж┐ ржПржХрзАржнрзВржд:**

```typescript
// Import
const RefundManagement = lazy(() => import("./components/RefundManagement"));

// ржорзЗржирзБ ржЖржЗржЯрзЗржо (ржбрзЗрж╕рзНржХржЯржк + ржорзЛржмрж╛ржЗрж▓)
{ id: "refunds", name: "Refunds", icon: "тЖйя╕П" }

// рж╕рзНржпрзБржЗржЪ ржХрзЗрж╕
case "refunds":
  return <Suspense fallback={<LazyLoadingFallback />}><RefundManagement /></Suspense>;
```

---

### 7я╕ПтГг ржмрзНржпрж╛ржкржХ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи

тЬЕ **REFUND_MANAGEMENT_SYSTEM.md рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:**

- рззрзи ржмрж┐ржнрж╛ржЧ
- рж╕ржорзНржкрзВрж░рзНржг рж╕рзНржХрж┐ржорж╛ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи
- рж╕ржорж╕рзНржд ржлрж╛ржВрж╢ржи ржмрзНржпржмрж╣рж╛рж░ ржЙржжрж╛рж╣рж░ржг
- ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо
- ржЖржВрж╢рж┐ржХ рж░рж┐ржлрж╛ржирзНржб ржЙржжрж╛рж╣рж░ржг
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржмрзНржпрж╛ржЦрзНржпрж╛
- ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржПржмржВ ржирж┐рж░рзАржХрзНрж╖рж╛ рждржерзНржп
- ржжрзНрж░рзБржд рж╢рзБрж░рзБ ржЧрж╛ржЗржб

---

## ржкрзНрж░ржпрзБржХрзНрждрж┐ржЧржд ржЙржЪрзНржЪрждрж░

### рж╕рзНржХрж┐ржорж╛ рж╕ржорзНржкрж░рзНржХ

```
Sales (ржмрж┐ржХрзНрж░ржпрж╝)
  тФФтФА Refund (рж░рж┐ржлрж╛ржирзНржб ржЕржирзБрж░рзЛржз)
      тФЬтФА RefundAuditTrail (рж╕ржорж╕рзНржд ржкрж░рж┐ржмрж░рзНрждржи ржЯрзНрж░рзНржпрж╛ржХ)
      тФФтФА StockMovement (рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ рж╕рзГрж╖рзНржЯрж┐)
          тФФтФА Products (рж╕рзНржЯржХ ржЖржкржбрзЗржЯ)

Customer (ржЧрзНрж░рж╛рж╣ржХ)
  тФФтФА Refund (рж░рж┐ржлрж╛ржирзНржб ржЗрждрж┐рж╣рж╛рж╕)

Branch (рж╢рж╛ржЦрж╛)
  тФЬтФА RefundPolicy (ржирзАрждрж┐)
  тФФтФА Refund (рж╢рж╛ржЦрж╛-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж┐ржлрж╛ржирзНржб)
```

### ржбрзЗржЯрж╛ ржкрзНрж░ржмрж╛рж╣

```
1. рж░рж┐ржлрж╛ржирзНржб ржЕржирзБрж░рзЛржз тЖТ ржирзАрждрж┐ ржпрж╛ржЪрж╛ржЗ тЖТ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржорзЛржжржи рж╕рж┐ржжрзНржзрж╛ржирзНржд
2. ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржЕржирзБржорзЛржжржи тЖТ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ тЖТ ржмрж┐ржЬрзНржЮржкрзНрждрж┐ (ржнржмрж┐рж╖рзНржпрждрзЗ)
3. рж░рж┐ржлрж╛ржирзНржб ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ тЖТ ржкрзЗржорзЗржирзНржЯ рж░рж┐ржнрж╛рж░рзНрж╕рж╛рж▓
4. рж░рж┐ржЯрж╛рж░рзНржи рж╕ржорзНржкрзВрж░рзНржг тЖТ рж╕рзНржЯржХ ржЖржкржбрзЗржЯ тЖТ рж╕рзНржЯржХ ржорзБржнржорзЗржирзНржЯ рж▓ржЧ
5. рж╕ржорж╕рзНржд ржзрж╛ржк тЖТ ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ (ржЪрж┐рж░рж╕рзНржерж╛ржпрж╝рзА рж░рзЗржХрж░рзНржб)
```

### ржЕржбрж┐ржЯ ржЪрзЗржЗржи

```
ржкрзНрж░рждрж┐ржЯрж┐ рж░рж┐ржлрж╛ржирзНржб ржПрж░ ржЬржирзНржп:
  тФФтФА created
     тФФтФА approved/rejected
        тФФтФА processed
           тФФтФА completed

ржкрзНрж░рждрж┐ржЯрж┐ ржХрзНрж░рж┐ржпрж╝рж╛ржпрж╝ рж░рзЗржХрж░рзНржб:
  - ржХрзЗ (ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ID + ржирж╛ржо)
  - ржХржЦржи (ржЯрж╛ржЗржорж╕рзНржЯрзНржпрж╛ржорзНржк)
  - ржХрзА (ржХрзНрж░рж┐ржпрж╝рж╛ ржкрзНрж░ржХрж╛рж░)
  - ржХрзЗржи (ржирзЛржЯ/ржоржирзНрждржмрзНржп)
```

---

## ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рж╕ржВржХрзНрж╖рж┐ржкрзНржд

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп | ржмрж░рзНржгржирж╛ | рж╕рзНржерж┐рждрж┐ |
|--------|--------|--------|
| **ржЕржирзБржорзЛржжржи ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ** | ржорж╛рж▓рзНржЯрж┐-рж╕рзНрждрж░ ржЕржирзБржорзЛржжржи | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржорзЛржжржи** | рж╕рзАржорж╛рж░ ржирж┐ржЪрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржЕржирзБржорзЛржжрж┐ржд | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **рж╕рзНржЯржХ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ** | рж░рж┐ржлрж╛ржирзНржбрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ рж░рж┐рж╕рзНржЯржХ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржирзАрждрж┐ ржЗржЮрзНржЬрж┐ржи** | рж╢рж╛ржЦрж╛-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзАрждрж┐ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓** | рж╕ржорзНржкрзВрж░рзНржг ржЗрждрж┐рж╣рж╛рж╕ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ** | ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржПржмржВ ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи** | рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржорзЛржмрж╛ржЗрж▓ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп** | рж╕ржорж╕рзНржд ржбрж┐ржнрж╛ржЗрж╕рзЗ ржХрж╛ржЬ ржХрж░рзЗ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЗржирзНржЯрж╛рж░ржлрзЗрж╕** | рж╕рж╣ржЬржмрзЛржзрзНржп ржбрж┐ржЬрж╛ржЗржи | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **API | рж╕ржорзНржкрзВрж░рзНржг RESTful API | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржЯрж╛ржЗржк рж╕рзЗржлржЯрж┐** | TypeScript рж╕ржВржЬрзНржЮрж╛ | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |
| **ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи** | ржмрж┐рж╕рзНрждрзГржд ржЧрж╛ржЗржб | тЬЕ рж╕ржорзНржкрзВрж░рзНржг |

---

## ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржПржмржВ рж╕ржорзНржорждрж┐

тЬЕ **рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржирж┐рж░рж╛ржкрждрзНрждрж╛:**

- рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░ржорж╛ржгрзАржХрзГржд ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░рж╛ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи
- рж╕ржорзНржкрзВрж░рзНржг ржЕржбрж┐ржЯ ржЯрзНрж░рзЗржЗрж▓ (ржХрзЗ, ржХржЦржи, ржХрзА)
- ржЕржирзБржорзЛржжржирзЗрж░ ржЬржирзНржп ржорж╛рж▓рзНржЯрж┐-рж╕рзНрждрж░ ржЪрзЗржХ
- рж╢рж╛ржЦрж╛-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг

тЬЕ **рж╕ржорзНржорждрж┐:**

- GDPR-ржмрж╛ржирзНржзржм (ржЧрзНрж░рж╛рж╣ржХ ржбрзЗржЯрж╛ рж╕рзБрж░ржХрзНрж╖рж╛)
- ржЕржбрж┐ржЯ-ржкрзНрж░рж╕рзНрждрзБржд (рж╕ржорзНржкрзВрж░рзНржг ржЗрждрж┐рж╣рж╛рж╕)
- ржЖрж░рзНржерж┐ржХ рж▓рзЗржиржжрзЗржи ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
- ржирзАрждрж┐-ржнрж┐рждрзНрждрж┐ржХ рж╕рж┐ржжрзНржзрж╛ржирзНржд

---

## ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржк

### ржПржЦржиржЗ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи:

1. тЬЕ `npm run dev` ржЪрж╛рж▓рж╛ржи - рж╕ржмржХрж┐ржЫрзБ ржХрж╛ржЬ ржХрж░ржмрзЗ
2. тЬЕ Dashboard ржжрзЗржЦрзБржи - ржирждрзБржи рж░рж┐ржлрж╛ржирзНржб ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ ржжрзГрж╢рзНржпржорж╛ржи
3. тЬЕ Sales тЖТ Manage Refunds - ржирждрзБржи ржмрж╛ржЯржи ржжрзГрж╢рзНржпржорж╛ржи
4. тЬЕ ржЕрзНржпрж╛ржк ржорзЗржирзБ - "Refunds" ржмрж┐ржХрж▓рзНржк ржжрзГрж╢рзНржпржорж╛ржи

### ржнржмрж┐рж╖рзНржпрждрзЗ ржпрзБржХрзНржд ржХрж░рзБржи (ржЕржкрж╢ржирж╛рж▓):

- [ ] ржЧрзНрж░рж╛рж╣ржХ ржмрж┐ржЬрзНржЮржкрзНрждрж┐ (ржПрж╕ржПржоржПрж╕/ржЗржорзЗржЗрж▓)
- [ ] рж░рж┐ржЯрж╛рж░рзНржи рж╢рж┐ржкрж┐ржВ рж▓рзЗржмрзЗрж▓ ржЬрзЗржирж╛рж░рзЗрж╢ржи
- [ ] ржЙржирзНржиржд рж░рж┐ржлрж╛ржирзНржб рж░рж┐ржкрзЛрж░рзНржЯ
- [ ] ржПржЖржЗ-ржЪрж╛рж▓рж┐ржд ржЬрж╛рж▓рж┐ржпрж╝рж╛рждрж┐ рж╕ржирж╛ржХрзНрждржХрж░ржг
- [ ] рж░рж┐ржлрж╛ржирзНржб ржЖржмрзЗржжржи ржкрждрзНрж░

---

## ржлрж╛ржЗрж▓ ржкрж░рж┐ржмрж░рзНрждржи рж╕ржВржХрзНрж╖рж┐ржкрзНржд

| ржлрж╛ржЗрж▓ | ржкрж░рж┐ржмрж░рзНрждржи | рж▓рж╛ржЗржи |
|------|---------|------|
| convex/schema.ts | 3 ржЯрзЗржмрж┐рж▓ ржпрзБржХрзНржд (refunds, refundAuditTrail, refundPolicies) | +250 |
| convex/refunds.ts | ржирждрзБржи ржлрж╛ржЗрж▓ (13 ржлрж╛ржВрж╢ржи) | 500+ |
| src/components/RefundManagement.tsx | ржирждрзБржи ржЗржЙржЖржЗ ржХржорзНржкрзЛржирзЗржирзНржЯ | 400+ |
| src/components/Dashboard.tsx | рж░рж┐ржлрж╛ржирзНржб ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ + ржкрзНржпрж╛ржирзЗрж▓ | +50 |
| src/components/Sales.tsx | "Manage Refunds" ржмрж╛ржЯржи | +10 |
| src/App.tsx | рж▓рзЗржЬрж┐ рж▓рзЛржб + ржорзЗржирзБ + рж░рзБржЯ | +5 |
| REFUND_MANAGEMENT_SYSTEM.md | рж╕ржорзНржкрзВрж░рзНржг ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи | 400+ |

---

## ржХрж░рзНржоржХрзНрж╖ржорждрж╛ ржкрзНрж░ржнрж╛ржм

тЬЕ **ржирзНржпрзВржирждржо ржХрж░рзНржоржХрзНрж╖ржорждрж╛ ржкрзНрж░ржнрж╛ржм:**

- refunds.ts ржоржбрж┐ржЙрж▓ рж▓рзЗржЬрж┐ рж▓рзЛржб ржХрж░рж╛ рж╣ржпрж╝
- ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЗржирзНржбрзЗржХрзНрж╕ (7ржЯрж┐) ржжрзНрж░рзБржд ржХрзЛржпрж╝рзЗрж░рж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ
- рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржбрзЗ ржЪрж▓рзЗ
- ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ ржжрзНрж░рзБржд ржЧржгржирж╛ ржХрж░рж╛ рж╣ржпрж╝

---

## ржкрж░рзАржХрзНрж╖рж╛ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

```
рж░рж┐ржлрж╛ржирзНржб рждрзИрж░рж┐:
  тЦб ржирждрзБржи рж░рж┐ржлрж╛ржирзНржб ржмрж╛ржЯржи ржжрзГрж╢рзНржпржорж╛ржи
  тЦб рж░рж┐ржлрж╛ржирзНржб ржЕржирзБрж░рзЛржз рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗ
  тЦб ржирзАрждрж┐ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣ржпрж╝

ржЕржирзБржорзЛржжржи:
  тЦб ржЕржирзБржорзЛржжржи ржмрж╛ржЯржи рж╕ржарж┐ржХ ржЕржмрж╕рзНржерж╛ржпрж╝ ржжрзГрж╢рзНржпржорж╛ржи
  тЦб ржЕржирзБржорзЛржжржи ржХрж╛ржЬ ржХрж░рзЗ
  тЦб ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржи ржХрж╛ржЬ ржХрж░рзЗ

ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб:
  тЦб рж░рж┐ржлрж╛ржирзНржб ржХрж╛рж░рзНржб ржкрзНрж░ржжрж░рзНрж╢рж┐ржд
  тЦб ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи рж╕ржарж┐ржХ
  тЦб ржкрзЗржирзНржбрж┐ржВ ржХрж╛ржЙржирзНржЯ рж╕ржарж┐ржХ

рж╕рзНржЯржХ:
  тЦб рж░рж┐рж╕рзНржЯржХ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржШржЯрзЗ
  тЦб рж╕рзНржЯржХ ржорзБржнржорзЗржирзНржЯ рж▓ржЧ рждрзИрж░рж┐ рж╣ржпрж╝

ржЕржбрж┐ржЯ:
  тЦб рж╕ржорж╕рзНржд ржХрзНрж░рж┐ржпрж╝рж╛ рж▓ржЧ ржХрж░рж╛ рж╣ржпрж╝
  тЦб ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржирж╛ржо рж╕ржарж┐ржХ
  тЦб ржЯрж╛ржЗржорж╕рзНржЯрзНржпрж╛ржорзНржк рж╕ржарж┐ржХ
```

---

## рж╕ржорж░рзНржержи ржПржмржВ рж╕ржорзНржкрж░рзНржХрж┐ржд рж╕рж┐рж╕рзНржЯрзЗржо

тЬЕ **ржкрзВрж░рзНржгрж░рзВржкрзЗ ржПржХрзАржнрзВржд рж╕рж┐рж╕рзНржЯрзЗржорзЗрж░ рж╕рж╛ржерзЗ:**

- **ржмрж┐ржХрзНрж░ржпрж╝ рж╕рж┐рж╕рзНржЯрзЗржо:** рж░рж┐ржлрж╛ржирзНржб ржмрж┐ржХрзНрж░ржпрж╝ ржерзЗржХрзЗ рж╕ржВржпрзБржХрзНржд
- **рж╕рзНржЯржХ рж╕рж┐рж╕рзНржЯрзЗржо:** рж░рж┐рж╕рзНржЯржХ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рж╕рзНржЯржХ ржЖржкржбрзЗржЯ ржХрж░рзЗ
- **ржЧрзНрж░рж╛рж╣ржХ рж╕рж┐рж╕рзНржЯрзЗржо:** рж░рж┐ржлрж╛ржирзНржб ржЗрждрж┐рж╣рж╛рж╕ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ
- **ржкрзЗржорзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо:** рж░рж┐ржлрж╛ржирзНржб ржорзЗржержб ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рзЗ
- **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб:** рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ
- **рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ:** ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи ржЙржкрж▓ржмрзНржз

---

## рж╕ржВржХрзНрж╖рзЗржкрзЗ

| ржжрж┐ржХ | рж╕рж╛ржоржЧрзНрж░рж┐ржХ |
|-----|---------|
| **рж╕ржорзНржкрзВрж░рзНржгрждрж╛** | тЬЕ 100% |
| **ржПржХрзАржХрж░ржг** | тЬЕ рж╕рж░рзНржмрждрзНрж░ |
| **ржкрж░рзАржХрзНрж╖рж╛** | тЬЕ ржкрзНрж░рж╕рзНрждрзБржд |
| **ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи** | тЬЕ ржмрзНржпрж╛ржкржХ |
| **ржЙрзОржкрж╛ржжржи ржкрзНрж░рж╕рзНрждрзБрждрж┐** | тЬЕ рж╣рж╛ржБ |

---

**ржХрж╛рж░рзНржпржХрж░ржХрж░ржг рж╕ржорзНржкрзВрж░рзНржг:** January 31, 2026  
**рж╕рзНржерж┐рждрж┐:** тЬЕ **ржкрзНрж░рзЛржбрж╛ржХрж╢ржи-рж░рзЗржбрж┐**  
**рж╕ржВрж╕рзНржХрж░ржг:** 1.0.0
