# ЁЯФН ржкржгрзНржп ржЗржорзЗржЬ рж░рж┐ржХржЧржирж┐рж╢ржи ржлрж┐ржЪрж╛рж░ ржЧрж╛ржЗржб

## рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржмрж┐ржмрж░ржг
ржПржЯрж┐ ржПржХржЯрж┐ ржЙржирзНржиржд ржлрж┐ржЪрж╛рж░ ржпрж╛ ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рзЗ рждрж╛рзОржХрзНрж╖ржгрж┐ржХ ржкржгрзНржпрзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред ржмрзЛрж░ржХрж╛, ржЖржмрж╛ржпрж╝рж╛, ржирж╛ржХрзНрж╕рзЛ ржЗрждрзНржпрж╛ржжрж┐ ржкрзЛрж╢рж╛ржХрзЗрж░ ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рж▓рзЗ рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рж╕рзЗржЗ ржкржгрзНржпрзЗрж░ рж╕ржорзНржкрзВрж░рзНржг ржмрж┐ржмрж░ржг ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред

## ржХрзАржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи

### ржзрж╛ржк 1: ржлрж┐ржЪрж╛рж░ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рзБржи
1. ржорзВрж▓ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб ржерзЗржХрзЗ "Product Scanner" ржмрж╛ "ЁЯУ╕ ржкржгрзНржп рж╕рзНржХрзНржпрж╛ржирж╛рж░" ржорзЗржирзБ ржЦрзБржБржЬрзБржи
2. ржПрждрзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ржПржмржВ ржлрж┐ржЪрж╛рж░ржЯрж┐ ржЦрзБрж▓ржмрзЗ

### ржзрж╛ржк 2: ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рзБржи
1. "ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рзБржи" рж╕рзЗржХрж╢ржирзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи
2. ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ ржерзЗржХрзЗ ржкржгрзНржпрзЗрж░ ржЫржмрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи
3. ржмрж╛ ржЫржмрж┐ржЯрж┐ рж╕рж░рж╛рж╕рж░рж┐ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рзЗ ржбрзНрж░ржк ржХрж░рзБржи

### ржзрж╛ржк 3: ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрзБржи
рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ:
- ржЫржмрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░ржмрзЗ
- ржкржгрзНржпрзЗрж░ рж░ржЩ, ржкрзНржпрж╛ржЯрж╛рж░рзНржи ржПржмржВ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рж╕ржирж╛ржХрзНржд ржХрж░ржмрзЗ
- ржорж┐рж▓рж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ ржПржоржи рж╕ржм ржкржгрзНржп ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░ржмрзЗ
- ржкржгрзНржпрзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░ржмрзЗ

## ржлрж▓рж╛ржлрж▓рзЗрж░ ржмрж┐ржмрж░ржг

### ржкрзНрж░рж╛ржержорж┐ржХ рждржерзНржп
- **ржорж┐рж▓ рж╢ржХрзНрждрж┐ (%)**: ржЫржмрж┐рж░ рж╕рж╛ржерзЗ ржкржгрзНржпрзЗрж░ ржХрждржЯрж╛ ржорж┐рж▓ ржЖржЫрзЗ
- **ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрж░ржг рж╕ржоржпрж╝**: ржЫржмрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рждрзЗ рж╕ржоржпрж╝ рж▓рзЗржЧрзЗржЫрзЗ
- **ржорж┐рж▓ ржкржгрзНржп рж╕ржВржЦрзНржпрж╛**: ржХрждржЯрж┐ ржкржгрзНржп ржкрж╛ржУржпрж╝рж╛ ржЧрзЗржЫрзЗ

### ржЪрж┐рж╣рзНржирж┐ржд ржмрзИрж╢рж┐рж╖рзНржЯрзНржп (Tags)
рж╕рж┐рж╕рзНржЯрзЗржо рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ рж╢ржирж╛ржХрзНржд ржХрж░рзЗ:
- ржкрзЛрж╢рж╛ржХрзЗрж░ рж░ржЩ (ржХрж╛рж▓рзЛ, рж╕рж╛ржжрж╛, рж▓рж╛рж▓, рж╕ржмрзБржЬ, ржирзАрж▓, ржЗрждрзНржпрж╛ржжрж┐)
- ржкрзЛрж╢рж╛ржХрзЗрж░ ржзрж░ржи (ржЖржмрж╛ржпрж╝рж╛, ржирж╛ржХрзНрж╕рзЛ, ржЗрждрзНржпрж╛ржжрж┐)
- ржЕржирзНржпрж╛ржирзНржп ржбрж┐ржЬрж╛ржЗржи ржЙржкрж╛ржжрж╛ржи

### рж╕рзЗрж░рж╛ ржорж┐рж▓ ржкржгрзНржп
рж╕ржмржЪрзЗржпрж╝рзЗ ржЙржкржпрзБржХрзНржд ржкржгрзНржпржЯрж┐ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ ржжрзЗржЦрж╛ржпрж╝ ржпрж╛рж░ ржоржзрзНржпрзЗ рж░ржпрж╝рзЗржЫрзЗ:

#### ржкржгрзНржп рждржерзНржп
- **ржкржгрзНржпрзЗрж░ ржирж╛ржо**: ржЙржжрж╛рж╣рж░ржг "ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛"
- **ржмрж░рзНржгржирж╛**: ржкржгрзНржпрзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж░рзНржгржирж╛
- **ржорзВрж▓рзНржп**: ржкржгрзНржпрзЗрж░ ржорзВрж▓рзНржп (рз│)
- **рж░ржЩ**: ржорзВрж▓ рж░ржЩ
- **рж╕рж╛ржЗржЬ**: ржЙржкрж▓ржмрзНржз рж╕рж╛ржЗржЬ/ржлрж┐ржЯрж┐ржВ
- **ржЙржкрж╛ржжрж╛ржи**: ржкржгрзНржпрзЗрж░ ржХрж╛ржкржбрж╝рзЗрж░ ржзрж░ржи (ржЬрж░рзНржЬрзЗржЯ, ржкрж▓рж┐ржПрж╕рзНржЯрж╛рж░, рж╕рж┐рж▓рзНржХ ржЗрждрзНржпрж╛ржжрж┐)
- **рж╕рзНржЯржХ**: ржХрждржЯрж┐ ржкржгрзНржп рж╕рзНржЯржХрзЗ ржЖржЫрзЗ

#### ржорж┐рж▓ рж╕рзНржХрзЛрж░ ржмрзНржпрж╛ржЬ
ржкрзНрж░рждрж┐ржЯрж┐ ржкржгрзНржпрзЗрж░ рж╕рж╛ржерзЗ ржПржХржЯрж┐ ржирзАрж▓ рж░ржЩрзЗрж░ ржмрзНржпрж╛ржЬ ржжрзЗржЦрж╛ржмрзЗ ржпрж╛ ржмрж▓ржмрзЗ ржХржд рж╢рждрж╛ржВрж╢ ржорж┐рж▓ ржЖржЫрзЗред

#### ржЕржирзБрж░рзВржк ржкржгрзНржп
ржпржжрж┐ ржХрзЛржирзЛ ржЕржирзБрж░рзВржк ржкржгрзНржп ржерж╛ржХрзЗ рждрж╛рж╣рж▓рзЗ рж╕рзЗржЧрзБрж▓рж┐ржУ ржжрзЗржЦрж╛ржирзЛ рж╣ржмрзЗред

### ржЕржирзНржпрж╛ржирзНржп ржорж┐рж▓ ржкржгрзНржп
ржкрзНрж░ржержо ржкржгрзНржпржЯрж┐ ржЫрж╛ржбрж╝рж╛ ржЕржирзНржп рж╕ржм ржкржгрзНржп ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ржпрж╝ред

## ржкрзНрж░ржпрзБржХрзНрждрж┐ржЧржд ржмрж┐ржмрж░ржг

### ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ

#### Phase 1: ржЫржмрж┐ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржирж┐рж░рзНржзрж╛рж░ржг
```
ржЙржжрж╛рж╣рж░ржг: ржЫржмрж┐ ржерзЗржХрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд рждржерзНржп ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ
- рж░ржЩ: [ржХрж╛рж▓рзЛ, рж╕рж╛ржжрж╛, ржирзАрж▓]
- ржкрзНржпрж╛ржЯрж╛рж░рзНржи: [рж╕ржорж╛ржи, ржкрзНрж░рж╕рж╛рж░рж┐ржд]
- рж╕рзНржЯрж╛ржЗрж▓: abaya
- ржЯрзНржпрж╛ржЧ: [ржХрж╛рж▓рзЛ, ржЖржмрж╛ржпрж╝рж╛, ржРрждрж┐рж╣рзНржпржмрж╛рж╣рзА]
```

#### Phase 2: ржкржгрзНржп ржорзНржпрж╛ржЪрж┐ржВ
```
ржкржпрж╝рзЗржирзНржЯ рж╕рж┐рж╕рзНржЯрзЗржо (out of 100):
- ржмрзЗрж╕ рж╕рзНржХрзЛрж░: 50 ржкржпрж╝рзЗржирзНржЯ
- рж░ржЩ ржорж┐рж▓: ржкрзНрж░рждрж┐ ржорж┐рж▓рзЗ +30 ржкржпрж╝рзЗржирзНржЯ
- ржЖржВрж╢рж┐ржХ рж░ржЩ ржорж┐рж▓: +15 ржкржпрж╝рзЗржирзНржЯ
- ржмрж┐ржнрж╛ржЧ ржорж┐рж▓: +15 ржкржпрж╝рзЗржирзНржЯ
```

#### Phase 3: ржлрж▓рж╛ржлрж▓ ржЙржкрж╕рзНржерж╛ржкржирж╛
ржЙржЪрзНржЪ рж╕рзНржХрзЛрж░ ржерзЗржХрзЗ ржирж┐ржорзНржи рж╕рзНржХрзЛрж░ ржЕржирзБржпрж╛ржпрж╝рзА рж╕рж╛ржЬрж┐ржпрж╝рзЗ рж╢рзАрж░рзНрж╖ 3-5ржЯрж┐ ржкржгрзНржп ржжрзЗржЦрж╛ржпрж╝

### ржлрж╛ржЗрж▓ ржХрж╛ржарж╛ржорзЛ

```
src/
тФЬтФАтФА components/
тФВ   тФФтФАтФА StaffPortal/
тФВ       тФФтФАтФА ProductImageRecognition.tsx (450+ рж▓рж╛ржЗржи)
тФЬтФАтФА hooks/
тФВ   тФФтФАтФА useProductImageRecognition.ts (350+ рж▓рж╛ржЗржи)
тФФтФАтФА services/
    тФФтФАтФА (ржЕржирзНржпрж╛ржирзНржп рж╕рзЗржмрж╛)

convex/
тФФтФАтФА productImageRecognition.ts (400+ рж▓рж╛ржЗржи)
```

### ржПржкрж┐ржЖржЗ ржПржирзНржбржкржпрж╝рзЗржирзНржЯрж╕

#### 1. recognizeProductFromImage
ржкржгрзНржп ржЫржмрж┐ ржерзЗржХрзЗ рж╢ржирж╛ржХрзНржд ржХрж░рзБржи

```
Input:
{
  imageFeatures: {
    colors: ['ржХрж╛рж▓рзЛ', 'рж╕рж╛ржжрж╛'],
    patterns: ['рж╕ржорж╛ржи'],
    style: 'abaya',
    tags: ['ржХрж╛рж▓рзЛ', 'ржЖржмрж╛ржпрж╝рж╛']
  },
  branchId?: 'main'
}

Output:
{
  success: true,
  matches: [ProductMatch[], ...],
  totalMatches: 3,
  error?: string
}
```

#### 2. searchProductsByColor
рж░ржЩ ржжрзНржмрж╛рж░рж╛ ржкржгрзНржп ржЦрзБржБржЬрзБржи

```
Input:
{
  color: 'ржХрж╛рж▓рзЛ',
  branchId?: 'main'
}

Output:
{
  success: true,
  products: [Product[], ...],
  count: 5
}
```

#### 3. searchProductsByCategory
ржмрж┐ржнрж╛ржЧ ржжрзНржмрж╛рж░рж╛ ржкржгрзНржп ржЦрзБржБржЬрзБржи

```
Input:
{
  category: 'ржЖржмрж╛ржпрж╝рж╛',
  branchId?: 'main'
}

Output:
{
  success: true,
  products: [Product[], ...],
  count: 12
}
```

#### 4. getProductDetails
ржкржгрзНржпрзЗрж░ рж╕ржорзНржкрзВрж░рзНржг ржмрж┐ржмрж░ржг ржкрж╛ржи

```
Input:
{
  productId: 'p-001'
}

Output:
{
  success: true,
  product: {
    ...productData,
    reviews: [Review[], ...],
    supplier: SupplierData,
    reviewCount: 5,
    avgRating: 4.5
  }
}
```

#### 5. findSimilarProducts
ржЕржирзБрж░рзВржк ржкржгрзНржп ржЦрзБржБржЬрзБржи

```
Input:
{
  productId: 'p-001',
  limit?: 5
}

Output:
{
  success: true,
  products: [Product[], ...],
  count: 3
}
```

#### 6. logProductImageUpload
ржЫржмрж┐ ржЖржкрж▓рзЛржб рж▓ржЧ рж░рж╛ржЦрзБржи

```
Input:
{
  productId: 'p-001',
  imageUrl: 'blob:...',
  staffId: 'staff-123',
  branchId?: 'main',
  uploadedAt: timestamp
}

Output:
{
  success: true,
  logId: 'log-xxxxx'
}
```

#### 7. getProductImageHistory
ржЫржмрж┐ ржЖржкрж▓рзЛржб ржЗрждрж┐рж╣рж╛рж╕ ржкрж╛ржи

```
Input:
{
  productId: 'p-001',
  limit?: 10
}

Output:
{
  success: true,
  history: [Log[], ...],
  count: 8
}
```

## ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЗржирзНржЯрж╛рж░ржлрзЗрж╕

### рж░ржЩ рж╕рзНржХрж┐ржо
- **ржкрзНрж░ржзрж╛ржи**: ржирзАрж▓ ржЧрзНрж░рзЗржбрж┐ржпрж╝рзЗржирзНржЯ (#667eea ржерзЗржХрзЗ #4facfe)
- **рж╕рж╛ржлрж▓рзНржп**: рж╕ржмрзБржЬ (#10b981)
- **рждрзНрж░рзБржЯрж┐**: рж▓рж╛рж▓ (#ef4444)
- **ржкржЯржнрзВржорж┐**: рж╣рж╛рж▓ржХрж╛ ржирзАрж▓ ржерзЗржХрзЗ ржЗржирзНржбрж┐ржЧрзЛ ржЧрзНрж░рзЗржбрж┐ржпрж╝рзЗржирзНржЯ

### ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛рж╢рзАрж▓ ржбрж┐ржЬрж╛ржЗржи
- **ржбрзЗрж╕рзНржХржЯржк (1024px+)**: 
  - ржжрзБржЗ ржХрж▓рж╛ржо рж▓рзЗржЖржЙржЯ
  - ржЖржкрж▓рзЛржб рж╕рзЗржХрж╢ржи ржмрж╛ржо ржжрж┐ржХрзЗ
  - ржлрж▓рж╛ржлрж▓ рж╕рзЗржХрж╢ржи ржбрж╛ржи ржжрж┐ржХрзЗ

- **ржЯрзНржпрж╛ржмрж▓рзЗржЯ (640px-1024px)**:
  - ржПржХржЯрж┐ ржХрж▓рж╛ржо рж▓рзЗржЖржЙржЯ
  - ржЖржкрж▓рзЛржб рж╕рзЗржХрж╢ржи ржЙржкрж░рзЗ
  - ржлрж▓рж╛ржлрж▓ рж╕рзЗржХрж╢ржи ржирж┐ржЪрзЗ

- **ржорзЛржмрж╛ржЗрж▓ (<640px)**:
  - ржкрзВрж░рзНржг ржкрзНрж░рж╕рзНрже рж▓рзЗржЖржЙржЯ
  - рж╕ржм ржЙржкрж╛ржжрж╛ржи рж╕рзНржЯрзНржпрж╛ржХ ржХрж░рж╛

### ржЗржирзНржЯрж╛рж░ржЕрзНржпрж╛ржХрж╢ржи
- **ржбрзНрж░рзНржпрж╛ржЧ ржПржмржВ ржбрзНрж░ржк**: ржЫржмрж┐ ржбрзНрж░рзНржпрж╛ржЧ ржХрж░рзЗ ржЖржкрж▓рзЛржб ржХрж░рзБржи
- **ржХрзНрж▓рж┐ржХ ржЖржкрж▓рзЛржб**: ржХрзНрж▓рж┐ржХ ржХрж░рзЗ ржмрзНрж░рж╛ржЙржЬ ржХрж░рзБржи
- **рж▓рзЛржбрж┐ржВ ржЕрзНржпрж╛ржирж┐ржорзЗрж╢ржи**: ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржХрж░ржгрзЗрж░ рж╕ржоржпрж╝ рж╕рзНржкрж┐ржирж┐ржВ ржЖржЗржХржи
- **ржЯрзЛрж╕рзНржЯ ржмрж┐ржЬрзНржЮржкрзНрждрж┐**: рж╕рж╛ржлрж▓рзНржп/ржмрзНржпрж░рзНржерждрж╛рж░ ржмрж╛рж░рзНрждрж╛
- **рждрзНрж░рзБржЯрж┐ ржкрзНрж░ржжрж░рзНрж╢ржи**: рж╕рзНржкрж╖рзНржЯ рждрзНрж░рзБржЯрж┐ ржмрж╛рж░рзНрждрж╛

## ржоржХ ржбрзЗржЯрж╛ ржЙржжрж╛рж╣рж░ржг

### ржкрзНрж░рзЛржбрж╛ржХрзНржЯ 1: ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛
```json
{
  "productId": "p-001",
  "name": "ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛",
  "category": "ржЖржмрж╛ржпрж╝рж╛",
  "description": "рж╕рзВржХрзНрж╖рзНржо ржЬрж░рзНржЬрзЗржЯ ржерзЗржХрзЗ рждрзИрж░рж┐ ржкрзНрж░рж┐ржорж┐ржпрж╝рж╛ржо ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛ред ржирж░ржо ржПржмржВ ржЖрж░рж╛ржоржжрж╛ржпрж╝ржХ ржкрж░рж┐ржзрж╛ржиред",
  "price": 2500,
  "color": "ржХрж╛рж▓рзЛ",
  "size": "ржПржХрж╕рж╛ржЗржЬ (ржлрзНрж░рж┐ рж╕рж╛ржЗржЬ)",
  "material": "ржЬрж░рзНржЬрзЗржЯ",
  "stock": 15,
  "imageUrl": "/products/abaya-01.jpg",
  "matchScore": 95,
  "similarProducts": [
    {
      "id": "p-002",
      "name": "ржбрж┐ржПржХрзНрж╕ ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛",
      "matchScore": 88
    }
  ]
}
```

### ржкрзНрж░рзЛржбрж╛ржХрзНржЯ 2: ржбрж┐ржПржХрзНрж╕ ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛
```json
{
  "productId": "p-002",
  "name": "ржбрж┐ржПржХрзНрж╕ ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛",
  "category": "ржЖржмрж╛ржпрж╝рж╛",
  "description": "рж╕рзНржЯрж╛ржЗрж▓рж┐рж╢ ржбрж┐ржПржХрзНрж╕ ржХрж╛рж▓рзЛ ржЖржмрж╛ржпрж╝рж╛ рж╕рзНржЯрж╛ржЗрж▓ рж╕рж╣ред ржжрзИржирж┐ржХ ржкрж░рж┐ржзрж╛ржирзЗрж░ ржЬржирзНржп ржЖржжрж░рзНрж╢ред",
  "price": 1800,
  "color": "ржХрж╛рж▓рзЛ",
  "size": "ржПржХрж╕рж╛ржЗржЬ",
  "material": "ржкрж▓рж┐ржПрж╕рзНржЯрж╛рж░",
  "stock": 25,
  "imageUrl": "/products/abaya-02.jpg",
  "matchScore": 88
}
```

### ржкрзНрж░рзЛржбрж╛ржХрзНржЯ 3: ржЧрж╛ржврж╝ рж▓рж╛рж▓ ржирж╛ржХрзНрж╕рзЛ
```json
{
  "productId": "p-004",
  "name": "ржЧрж╛ржврж╝ рж▓рж╛рж▓ ржирж╛ржХрзНрж╕рзЛ",
  "category": "ржирж╛ржХрзНрж╕рзЛ",
  "description": "ржРрждрж┐рж╣рзНржпржмрж╛рж╣рзА ржиржХрж╢рж╛ рж╕рж╣ ржЧрж╛ржврж╝ рж▓рж╛рж▓ ржирж╛ржХрзНрж╕рзЛред ржмрж┐рж╢рзЗрж╖ ржЕржирзБрж╖рзНржарж╛ржирзЗрж░ ржЬржирзНржп ржЙржкржпрзБржХрзНрждред",
  "price": 3200,
  "color": "ржЧрж╛ржврж╝ рж▓рж╛рж▓",
  "size": "ржПрж╕/ржПржо/ржПрж▓/ржПржХрзНрж╕ржПрж▓",
  "material": "рж╕рж┐рж▓рзНржХ ржмрзНрж▓рзЗржирзНржб",
  "stock": 8,
  "imageUrl": "/products/niqab-01.jpg",
  "matchScore": 75
}
```

## ржкрзНрж░рзЛржбрж╛ржХрзНржЯрж╢ржи рж╕рзЗржЯржЖржк

### ржкрж░ржмрж░рзНрждрзА ржкржжржХрзНрж╖рзЗржк

#### 1. ML/AI ржоржбрзЗрж▓ ржЗржирзНржЯрж┐ржЧрзНрж░рзЗрж╢ржи
ржмрж░рзНрждржорж╛ржирзЗ рж╕рж┐рж╕рзНржЯрзЗржо Canvas-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржмрзЗрж╕рж┐ржХ рж░ржЩ рж╕ржирж╛ржХрзНрждржХрж░ржг ржХрж░рзЗред ржЙржирзНржиржд рж╕рзЗржЯржЖржкрзЗрж░ ржЬржирзНржп:

```
ржЕржкрж╢ржи 1: TensorFlow.js (ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ML)
- ржкрзНрж░рж┐ржЯрзНрж░рзЗржЗржиржб ржоржбрзЗрж▓ рж▓рзЛржб ржХрж░рзБржи
- ржЫржмрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи
- ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржмрзЗрж░ ржХрж░рзБржи

ржЕржкрж╢ржи 2: OpenAI Vision API
- ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рзБржи OpenAI рждрзЗ
- API ржерзЗржХрзЗ ржмрж┐рж╢ржж ржмрж░рзНржгржирж╛ ржкрж╛ржи

ржЕржкрж╢ржи 3: Custom ML Pipeline
- ржирж┐ржЬрж╕рзНржм ржоржбрзЗрж▓ ржкрзНрж░рж╢рж┐ржХрзНрж╖ржг ржжрж┐ржи
- рж╕рж╛рж░рзНржнрж╛рж░рзЗ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рзБржи
```

#### 2. ржбрж╛ржЯрж╛ржмрзЗрж╕ ржЖржкржбрзЗржЯ
ржкрзНрж░рзЛржбрж╛ржХрзНржЯ рж╕рзНржХрж┐ржорж╛ржпрж╝ ржпрзБржХрзНржд ржХрж░рзБржи:

```typescript
// convex/schema.ts ржП ржпрзЛржЧ ржХрж░рзБржи
db.defineTable('products', {
  ...existingFields,
  colors: v.array(v.string()),      // [ржХрж╛рж▓рзЛ, рж╕рж╛ржжрж╛]
  patterns: v.array(v.string()),    // [рж╕ржорж╛ржи, ржбржЯ]
  tags: v.array(v.string()),        // [ржЖржмрж╛ржпрж╝рж╛, ржРрждрж┐рж╣рзНржпржмрж╛рж╣рзА]
  imageFeatures: v.optional(v.object({
    avgColor: v.string(),
    dominantColors: v.array(v.string()),
    hasPatterns: v.boolean(),
  })),
})

db.defineTable('productImageLogs', {
  productId: v.id('products'),
  imageUrl: v.string(),
  staffId: v.id('users'),
  branchId: v.string(),
  uploadedAt: v.number(),
  recognitionResult: v.optional(v.object({...})),
  createdAt: v.number(),
})
```

#### 3. API рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рж╛
Hook-ржЧрзБрж▓рж┐рждрзЗ Convex ржХрж▓ uncomment ржХрж░рзБржи:

```typescript
// convex/react hook ржерзЗржХрзЗ API ржХрж▓ ржХрж░рзБржи
const result = useQuery(
  api.productImageRecognition.recognizeProductFromImage,
  { imageFeatures, branchId }
);
```

#### 4. ржкрж╛рж░ржлрж░ржорзЗржирзНрж╕ ржЕржкржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи
- ржЗржорзЗржЬ ржХржорзНржкрзНрж░рзЗрж╢ржи ржпрзЛржЧ ржХрж░рзБржи (compressorjs)
- ржХрзНржпрж╛рж╢рж┐ржВ рж╕рж┐рж╕рзНржЯрзЗржо ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рзБржи
- ржмрзНржпрж╛ржЪ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ рж╕рзЗржЯржЖржк ржХрж░рзБржи

#### 5. ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕ ржПржмржВ рж▓ржЧрж┐ржВ
```typescript
// ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзНржмрзАржХрзГрждрж┐ рж╕рзЗрж╢ржи рж▓ржЧ ржХрж░рзБржи
await logProductImageUpload({
  productId,
  imageUrl,
  staffId,
  matchScore,
  recognitionTime,
});
```

## рж╕рзАржорж╛ржмржжрзНржзрждрж╛ ржПржмржВ ржирзЛржЯ

### ржмрж░рзНрждржорж╛ржи рж╕ржВрж╕рзНржХрж░ржг
- тЬЕ рж░ржЩ-ржнрж┐рждрзНрждрж┐ржХ ржорзНржпрж╛ржЪрж┐ржВ
- тЬЕ ржмрж┐ржнрж╛ржЧ-ржнрж┐рждрзНрждрж┐ржХ ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ
- тЬЕ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛рж╢рзАрж▓ ржбрж┐ржЬрж╛ржЗржи
- тЬЕ ржЯрзЛрж╕рзНржЯ ржмрж┐ржЬрзНржЮржкрзНрждрж┐
- тЭМ рж╕ржорзНржкрзВрж░рзНржг ржЖржХрзГрждрж┐ рж╕рзНржмрзАржХрзГрждрж┐ (ржЖрж╕ржЫрзЗ)
- тЭМ ржЯрзЗржХрзНрж╕ржЪрж╛рж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (ржЖрж╕ржЫрзЗ)
- тЭМ ржмрзНржпрж╛ржЪ ржЖржкрж▓рзЛржб (ржЖрж╕ржЫрзЗ)

### ржмрзНрж░рж╛ржЙржЬрж╛рж░ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп
- тЬЕ Chrome/Edge (рж╕ржорзНржкрзВрж░рзНржг рж╕ржорж░рзНржержи)
- тЬЕ Firefox (рж╕ржорзНржкрзВрж░рзНржг рж╕ржорж░рзНржержи)
- тЬЕ Safari (рж╕ржорзНржкрзВрж░рзНржг рж╕ржорж░рзНржержи)
- тЪая╕П IE 11 (рж╕рзАржорж┐ржд рж╕ржорж░рзНржержи)

### ржлрж╛ржЗрж▓ рж╕рж╛ржЗржЬ рж╕рзАржорж╛
- рж╕рж░рзНржмрзЛржЪрзНржЪ: 5MB
- рж╕рзБржкрж╛рж░рж┐рж╢ржХрзГржд: 1-2MB
- ржлрж░рзНржорзНржпрж╛ржЯ: PNG, JPG, GIF, WebP

## ржШржи ржШржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж┐ржд ржкрзНрж░рж╢рзНржи

### Q: ржХрзЗржи ржЖржорж╛рж░ ржЫржмрж┐ ржЦрзБржБржЬрзЗ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐?
A: ржПржЯрж┐ рж╣рждрзЗ ржкрж╛рж░рзЗ ржХрж╛рж░ржг:
- ржЫржмрж┐рж░ ржорж╛ржи ржЦрзБржм ржХржо
- ржкржгрзНржп ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржирзЗржЗ
- ржЫржмрж┐рж░ рж░ржЩ ржЦрзБржм ржнрж┐ржирзНржи

**рж╕ржорж╛ржзрж╛ржи**: ржирждрзБржи ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи ржмрж╛ ржкржгрзНржпржЯрж┐ ржкржгрзНржп рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржпрзЛржЧ ржХрж░рзБржиред

### Q: ржорж┐рж▓ рж╕рзНржХрзЛрж░ ржХрзАржнрж╛ржмрзЗ ржЧржгржирж╛ ржХрж░рж╛ рж╣ржпрж╝?
A: рж╕рзНржХрзЛрж░ ржЧржгржирж╛ ржХрж░рж╛ рж╣ржпрж╝:
- рж░ржЩ ржорж┐рж▓: 30 ржкржпрж╝рзЗржирзНржЯ
- ржмрж┐ржнрж╛ржЧ ржорж┐рж▓: 20 ржкржпрж╝рзЗржирзНржЯ
- ржЯрзНржпрж╛ржЧ ржорж┐рж▓: 15 ржкржпрж╝рзЗржирзНржЯ
- ржЕржирзНржпрж╛ржирзНржп ржмрзИрж╢рж┐рж╖рзНржЯрзНржп: 35 ржкржпрж╝рзЗржирзНржЯ

### Q: ржХрзЗржи ржХржЦржиржУ ржнрзБрж▓ ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрж╛ржпрж╝?
A: ржХрж╛рж░ржг ржПржЯрж┐ ржПржЦржиржУ ржоржХ ржбрзЗржЯрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржкрзНрж░рзЛржбрж╛ржХрзНржЯрж╢ржирзЗ ML ржоржбрзЗрж▓ ржпрзБржХрзНржд ржХрж░рж╛рж░ ржкрж░рзЗ ржирж┐рж░рзНржнрзБрж▓рждрж╛ ржмрзГржжрзНржзрж┐ ржкрж╛ржмрзЗред

## рж╕рж╣рж╛ржпрж╝рждрж╛ ржПржмржВ рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ

ржпржжрж┐ ржХрзЛржирзЛ рж╕ржорж╕рзНржпрж╛ ржкрж╛ржи:
1. ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржХржирж╕рзЛрж▓ ржЪрзЗржХ ржХрж░рзБржи (F12)
2. ржПрж░рж░ ржорзЗрж╕рзЗржЬ рж╕рзНржХрзНрж░рж┐ржирж╢ржЯ ржХрж░рзБржи
3. ржкрзНрж░ржпрзБржХрзНрждрж┐ржЧржд ржЯрж┐ржорзЗ рж░рж┐ржкрзЛрж░рзНржЯ ржХрж░рзБржи

---

**рж╕ржВрж╕рзНржХрж░ржг**: 1.0  
**рж╢рзЗрж╖ ржЖржкржбрзЗржЯ**: ржлрзЗржмрзНрж░рзБржпрж╝рж╛рж░рж┐ рзирзжрзирзм  
**рж▓рзЗржЦржХ**: AI рж╕рж╣рж╛ржпрж╝ржХ
