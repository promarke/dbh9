# ЁЯОп ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржлрж┐ржЪрж╛рж░ ржЯрзЗрж╕рзНржЯрж┐ржВ ржЧрж╛ржЗржб ржПржмржВ рж╕ржорж╕рзНржпрж╛ ржирж┐рж░рзНржгржпрж╝
**ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржПржмржВ ржбрж┐ржмрж╛ржЧрж┐ржВ ржЧрж╛ржЗржб**

---

## ЁЯУЛ ржкрзНрж░рж┐-ржЯрзЗрж╕рзНржЯрж┐ржВ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

### рж╕рж┐рж╕рзНржЯрзЗржо ржкрзНрж░рж╕рзНрждрзБрждрж┐
- [ ] ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржХржирж╕рзЛрж▓ ржЦрзБрж▓рзБржи (F12)
- [ ] Network tab ржЦрзБрж▓рзБржи
- [ ] рж╕ржм ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржирзЛржЯ ржХрж░рзБржи
- [ ] ржПржХржЯрж┐ ржЯрзЗрж╕рзНржЯ ржмрзНрж░рж╛ржЮрзНржЪ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи
- [ ] ржПржХржЬржи ржЯрзЗрж╕рзНржЯ ржЗржЙржЬрж╛рж░ рж▓ржЧржЗржи ржХрж░рзБржи
- [ ] ржбрж╛ржЯрж╛ржмрзЗрж╕ ржмрзНржпрж╛ржХржЖржк ржирж┐ржи

---

## ЁЯФз рж╕рж┐рж╕рзНржЯрзЗржо ржХржорзНржкрзЛржирзЗржирзНржЯ ржЯрзЗрж╕рзНржЯрж┐ржВ

### 1я╕ПтГг ржбрж╛ржЯрж╛ржмрзЗрж╕ ржХрж╛ржирзЗржХрж╢ржи ржЯрзЗрж╕рзНржЯ

**ржХрзА ржЪрзЗржХ ржХрж░ржмрзЗржи**:
```
тЬУ Convex backend startup: Errors ржирзЗржЗ
тЬУ Database connection: Active
тЬУ Authentication service: Working
тЬУ Network tab: No 4xx/5xx errors
```

**рж╕ржорзНржнрж╛ржмрзНржп рж╕ржорж╕рзНржпрж╛ ржПржмржВ рж╕ржорж╛ржзрж╛ржи**:

| рж╕ржорж╕рзНржпрж╛ | ржХрж╛рж░ржг | рж╕ржорж╛ржзрж╛ржи |
|-------|------|--------|
| `Cannot reach Convex backend` | рж╕рж╛рж░рзНржнрж╛рж░ down | ржкрж░рзЗ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи |
| `Authentication failed` | ржЯрзЛржХрзЗржи ржПржХрзНрж╕ржкрж╛ржпрж╝рж╛рж░ | ржкрзБржирж░рж╛ржпрж╝ рж▓ржЧржЗржи ржХрж░рзБржи |
| `Database connection timeout` | ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ slow | ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЪрзЗржХ ржХрж░рзБржи |

---

### 2я╕ПтГг рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржбрзЗржЯрж╛ рж╕рж┐ржЩрзНржХ ржЯрзЗрж╕рзНржЯ

#### ржЯрзЗрж╕рзНржЯ ржХрзЗрж╕ рзз: ржмрж┐ржХрзНрж░ржпрж╝ рждрж╛рж▓рж┐ржХрж╛ ржЖржкржбрзЗржЯ
```bash
ржЪрж░ржг:
1. ржжрзБржЯрж┐ ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржЯрзНржпрж╛ржм ржЦрзБрж▓рзБржи
2. ржкрзНрж░ржержо ржЯрзНржпрж╛ржмрзЗ Sales ржЦрзЛрж▓рзЗржи
3. ржжрзНржмрж┐рждрзАржпрж╝ ржЯрзНржпрж╛ржмрзЗ ржирждрзБржи ржмрж┐ржХрзНрж░ржпрж╝ рждрзИрж░рж┐ ржХрж░рзБржи
4. ржкрзНрж░ржержо ржЯрзНржпрж╛ржмрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЖржкржбрзЗржЯ ржЖрж╢рж╛ ржХрж░рзБржи

тЬУ рж╕рж╛ржлрж▓рзНржп: рждрж╛рж▓рж┐ржХрж╛ рзи-рзй рж╕рзЗржХрзЗржирзНржб ржоржзрзНржпрзЗ ржЖржкржбрзЗржЯ рж╣ржпрж╝
тЬЧ ржмрзНржпрж░рзНржерждрж╛: ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ рж░рж┐ржлрзНрж░рзЗрж╢ ржкрзНрж░ржпрж╝рзЛржЬржи
```

#### ржЯрзЗрж╕рзНржЯ ржХрзЗрж╕ рзи: рж░рж┐ржлрж╛ржирзНржб рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ
```bash
ржЪрж░ржг:
1. Refund Management ржЦрзЛрж▓рзЗржи
2. ржкрзЗржирзНржбрж┐ржВ рж░рж┐ржлрж╛ржирзНржб рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи
3. "Approve" ржХрзНрж▓рж┐ржХ ржХрж░рзБржи
4. рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржЮрзНржЬ ржжрзЗржЦрзБржи

тЬУ рж╕рж╛ржлрж▓рзНржп: "pending_approval" тЖТ "approved"
тЬЧ ржмрзНржпрж░рзНржерждрж╛: рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝ ржирж╛
```

---

### 3я╕ПтГг рждрзНрж░рзБржЯрж┐ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржЯрзЗрж╕рзНржЯ

#### ржЯрзЗрж╕рзНржЯ ржХрзЗрж╕: ржЕржкрж░рзНржпрж╛ржкрзНржд рж╕рзНржЯржХ
```bash
ржЪрж░ржг:
1. ржПржХржЯрж┐ ржкржгрзНржп ржмрзЗржЫрзЗ ржирж┐ржи рж╕рзНржЯржХ = 2
2. ржХрзЛржпрж╝рж╛ржирзНржЯрж┐ржЯрж┐ = 3 ржжрж┐ржпрж╝рзЗ ржмрж┐ржХрзНрж░ржпрж╝ рждрзИрж░рж┐ ржХрж░рзБржи
3. ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржЖрж╢рж╛ ржХрж░рзБржи

тЬУ рж╕рж╛ржлрж▓рзНржп: "Stock validation failed" ржорзЗрж╕рзЗржЬ
тЬЧ ржмрзНржпрж░рзНржерждрж╛: ржмрж┐ржХрзНрж░ржпрж╝ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ (рж╕ржорж╕рзНржпрж╛!)
```

---

### 4я╕ПтГг ржбрзЗржЯрж╛ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржЯрзЗрж╕рзНржЯ

#### ржЯрзЗрж╕рзНржЯ ржХрзЗрж╕: ржЧрзНрж░рж╛рж╣ржХ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ
```bash
ржЪрж░ржг:
1. ржЧрзНрж░рж╛рж╣ржХ рждрзИрж░рж┐ ржХрж░рзБржи: email = test@example.com
2. ржПржХржЗ email ржжрж┐ржпрж╝рзЗ ржЖржмрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи
3. рждрзНрж░рзБржЯрж┐ ржЖрж╢рж╛ ржХрж░рзБржи

тЬУ рж╕рж╛ржлрж▓рзНржп: "Already exists" ржорзЗрж╕рзЗржЬ
тЬЧ ржмрзНржпрж░рзНржерждрж╛: ржжрзБржЯрж┐ ржПржХржЗ email ржЧрзНрж░рж╛рж╣ржХ
```

---

## ЁЯТ░ рж░рж┐ржлрж╛ржирзНржб ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЯрзЗрж╕рзНржЯ

### рж╕рзНржЯрзЗржк рзз: ржкрзНрж░рж╛ржержорж┐ржХ ржбрзЗржЯрж╛ рж╕ржВржЧрзНрж░рж╣

```javascript
// ржПржЗ рждржерзНржп рж░рзЗржХрж░рзНржб ржХрж░рзБржи:
const testData = {
  saleNumber: "SAL-2024-001",      // ржмрж┐ржХрзНрж░ржпрж╝ ржиржорзНржмрж░
  saleDate: "2024-01-15",           // ржмрж┐ржХрзНрж░ржпрж╝ рждрж╛рж░рж┐ржЦ
  customerName: "Test Customer",    // ржЧрзНрж░рж╛рж╣ржХ ржирж╛ржо
  originalAmount: 1000,             // ржорзВрж▓ ржкрж░рж┐ржорж╛ржг
  items: [
    { name: "Item 1", qty: 2, price: 250 },
    { name: "Item 2", qty: 1, price: 500 }
  ],
  originalStock: {                  // ржорзВрж▓ рж╕рзНржЯржХ
    "Item 1": 10,
    "Item 2": 15
  },
  customerLoyalty: 100,              // ржЖрж╕рж▓ ржкржпрж╝рзЗржирзНржЯ
};
```

### рж╕рзНржЯрзЗржк рзи: рж░рж┐ржлрж╛ржирзНржб ржЕржирзБрж░рзЛржз рждрзИрж░рж┐

```
ржлрж░рзНржо ржкрзВрж░ржг:
тФЬтФА Sale: "SAL-2024-001" рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи
тФЬтФА Items: рж╕ржм ржЖржЗржЯрзЗржо рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи
тФЬтФА Reason: "Testing" ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи
тФЬтФА Condition: "Good" рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи
тФЬтФА Restock: тЬУ ржЪрзЗржХ ржХрж░рзБржи
тФФтФА Notes: "Automated Test"

тЬУ рж╕рж╛ржлрж▓рзНржп: REF-xxx ржиржорзНржмрж░ ржкрж╛ржи
```

### рж╕рзНржЯрзЗржк рзй: ржЕржирзБржорзЛржжржи ржпрж╛ржЪрж╛ржЗржХрж░ржг

```
Database ржЪрзЗржХ:
тЬУ refunds table рждрзЗ ржирждрзБржи рж░рзЗржХрж░рзНржб
тЬУ approvalStatus = "pending_approval"
тЬУ refundAuditTrail рждрзЗ entry
тЬУ рж╕ржм ржбрзЗржЯрж╛ рж╕ржарж┐ржХ (amount, items)
```

### рж╕рзНржЯрзЗржк рзк: ржкрзНрж░рж╕рзЗрж╕рж┐ржВ ржпрж╛ржЪрж╛ржЗржХрж░ржг

```
"Process" ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:
тЬУ Status: "pending" тЖТ "processed"
тЬУ Timestamp: рж░рзЗржХрж░рзНржб ржХрж░рж╛
тЬУ Audit trail: ржирждрзБржи entry
тЬУ UI: ржЖржкржбрзЗржЯ рж╣ржпрж╝рзЗржЫрзЗ
```

### рж╕рзНржЯрзЗржк рзл: рж╕ржорзНржкржирзНржирждрж╛ ржпрж╛ржЪрж╛ржЗржХрж░ржг (UNDO SALE)

```
"Complete" ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рзБржи:
тЬУ Status: "processed" тЖТ "completed"
тЬУ Sales entry: status = "cancelled"
тЬУ Stock restored: ржирждрзБржи qty = ржорзВрж▓ qty
тЬУ Loyalty points: reversed
тЬУ All audit trails: updated
```

### рж╕рзНржЯрзЗржк рзм: ржбрзЗржЯрж╛ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржпрж╛ржЪрж╛ржЗржХрж░ржг

```javascript
// Database ржП ржПржЗ ржкрж░рж┐ржмрж░рзНрждржи ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи:

1. Sale ржЯрзЗржмрж┐рж▓:
   тЬУ saleId.status === "cancelled"
   
2. Products ржЯрзЗржмрж┐рж▓:
   тЬУ Item1.currentStock === 10 (ржорзВрж▓)
   тЬУ Item2.currentStock === 15 (ржорзВрж▓)
   
3. Customers ржЯрзЗржмрж┐рж▓:
   тЬУ loyaltyPoints === 100 (ржорзВрж▓)
   
4. Refunds ржЯрзЗржмрж┐рж▓:
   тЬУ status === "completed"
   тЬУ isReturned === true
   
5. Audit Trails:
   тЬУ рж╕ржм рзн ржзрж╛ржкрзЗрж░ entry ржерж╛ржХрж╛ ржЙржЪрж┐ржд
```

---

## ЁЯУК ржбрзЗржЯрж╛ ржЗржирзНржЯрж┐ржЧрзНрж░рж┐ржЯрж┐ ржпрж╛ржЪрж╛ржЗ

### рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржкрж░рзАржХрзНрж╖рж╛

#### ржорзВрж▓ рж╕рзВрждрзНрж░ рзз: ржорзЛржЯ рж╕рзНржЯржХ
```javascript
// рж╕ржм рж╢рж╛ржЦрж╛ржпрж╝ рж╕рзНржЯржХ ржпрзЛржЧ ржХрж░рзБржи = ржЧрзНрж▓рзЛржмрж╛рж▓ рж╕рзНржЯржХ
productStock.global === 
  productStock.branch1 + 
  productStock.branch2 + 
  productStock.branch3

тЬУ рж╕рж░рзНржмржжрж╛ рж╕рждрзНржп рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд
```

#### ржорзВрж▓ рж╕рзВрждрзНрж░ рзи: ржЧрзНрж░рж╛рж╣ржХ ржкржпрж╝рзЗржирзНржЯ
```javascript
// ржкржпрж╝рзЗржирзНржЯ ржХржЦржиржУ ржЛржгрж╛рждрзНржоржХ рж╣рждрзЗ ржкрж╛рж░рзЗ ржирж╛
customerLoyaltyPoints >= 0

тЬУ рж╕рж░рзНржмржжрж╛ рж╕рждрзНржп рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд
```

#### ржорзВрж▓ рж╕рзВрждрзНрж░ рзй: рж░рж┐ржлрж╛ржирзНржб ржкрж░рж┐ржорж╛ржг
```javascript
// рж░рж┐ржлрж╛ржирзНржб = рж╕рж┐рж▓рзЗржХрзНржЯрзЗржб ржЖржЗржЯрзЗржорж╕
refundAmount === 
  selectedItems.reduce((sum, item) => 
    sum + item.totalPrice, 0)

тЬУ рж╕рж░рзНржмржжрж╛ рж╕рждрзНржп рж╣ржУржпрж╝рж╛ ржЙржЪрж┐ржд
```

---

## ЁЯФН ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЯрзНрж░рж╛ржлрж┐ржХ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг

### ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржбрзЗржнрзЗрж▓ржкрж╛рж░ ржЯрзБрж▓рж╕ (F12)

#### ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЯрзНржпрж╛ржм ржЪрзЗржХ ржХрж░рзБржи
```
ржкрзНрж░рждрж┐ржЯрж┐ ржЕржкрж╛рж░рзЗрж╢ржи ржЬржирзНржп:
тЬУ Request ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ
тЬУ Response ржкрж╛ржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗ (рзирзжрзж рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕)
тЬУ Response ржЯрж╛ржЗржо < рзз рж╕рзЗржХрзЗржирзНржб
тЬУ ржХрзЛржи red (error) рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржирзЗржЗ
```

#### ржХржирж╕рзЛрж▓ ржЯрзНржпрж╛ржм ржЪрзЗржХ ржХрж░рзБржи
```
тЬУ ржХрзЛржи Red error рж▓ржЧ
тЬУ ржХрзЛржи Yellow warning рж▓ржЧ
тЬУ рж╕рж╛ржХрж╕рзЗрж╕ ржорзЗрж╕рзЗржЬ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд
тЬУ Toast notifications ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ
```

---

## ЁЯФР ржЕржерзЗржирзНржЯрж┐ржХрзЗрж╢ржи ржПржмржВ ржЕржерж░рж╛ржЗржЬрзЗрж╢ржи

### ржЯрзЗрж╕рзНржЯ ржХрзЗрж╕: ржЗржЙржЬрж╛рж░ ржкрж╛рж░ржорж┐рж╢ржи

```
ржЯрзЗрж╕рзНржЯ рзз: Refund ржЕржирзБржорзЛржжржи ржХрж░рж╛
тФЬтФА ржЗржЙржЬрж╛рж░: Admin тЬУ ржХрж╛ржЬ ржХрж░рзЗ
тФЬтФА ржЗржЙржЬрж╛рж░: Manager тЬУ ржХрж╛ржЬ ржХрж░рзЗ
тФФтФА ржЗржЙржЬрж╛рж░: Cashier тЬЧ ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржд (ржХрж╛ржорзНржп)

ржЯрзЗрж╕рзНржЯ рзи: рж╕рзНржЯржХ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп
тФЬтФА ржЗржЙржЬрж╛рж░: Stock keeper тЬУ ржХрж╛ржЬ ржХрж░рзЗ
тФЬтФА ржЗржЙржЬрж╛рж░: Manager тЬУ ржХрж╛ржЬ ржХрж░рзЗ
тФФтФА ржЗржЙржЬрж╛рж░: Cashier тЬЧ ржкрзНрж░рждрзНржпрж╛ржЦрзНржпрж╛ржд (ржХрж╛ржорзНржп)
```

---

## ЁЯЪи рж╕ржорж╕рзНржпрж╛ ржирж┐рж░рзНржгржпрж╝ ржорзНржпрж╛ржЯрзНрж░рж┐ржХрзНрж╕

### рж╕ржорж╕рзНржпрж╛ рзз: рж░рж┐ржлрж╛ржирзНржб рждрзИрж░рж┐ ржмрзНржпрж░рзНрже

| рж▓ржХрзНрж╖ржг | ржХрж╛рж░ржг | рж╕ржорж╛ржзрж╛ржи |
|------|------|--------|
| "Sale not found" | Sale ID ржнрзБрж▓ | рж╕ржарж┐ржХ sale ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи |
| "No items selected" | ржлрж░рзНржо ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи | ржХржоржкржХрзНрж╖рзЗ ржПржХржЯрж┐ item рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи |
| "Network error" | ржХрж╛ржирзЗржХрж╢ржи issue | ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЪрзЗржХ ржХрж░рзБржи |
| "Refunds not allowed" | Policy restrict | Branch policy ржЪрзЗржХ ржХрж░рзБржи |

### рж╕ржорж╕рзНржпрж╛ рзи: рж╕рзНржЯржХ ржЖржкржбрзЗржЯ ржирж╛ рж╣ржУржпрж╝рж╛

| рж▓ржХрзНрж╖ржг | ржХрж╛рж░ржг | рж╕ржорж╛ржзрж╛ржи |
|------|------|--------|
| рж╕рзНржЯржХ same ржерж╛ржХржЫрзЗ | Update ржмрзНржпрж░рзНрже | ржХржирж╕рзЛрж▓ error ржжрзЗржЦрзБржи |
| Branch stock updated ржирзЗржЗ | Index error | Product refresh ржХрж░рзБржи |
| Global stock wrong | Calculation error | ржорзВрж▓ рж╕рзВрждрзНрж░ ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи |

### рж╕ржорж╕рзНржпрж╛ рзй: ржкржпрж╝рзЗржирзНржЯ ржмрж┐ржкрж░рзАржд ржирж╛ рж╣ржУржпрж╝рж╛

| рж▓ржХрзНрж╖ржг | ржХрж╛рж░ржг | рж╕ржорж╛ржзрж╛ржи |
|------|------|--------|
| ржкржпрж╝рзЗржирзНржЯ same ржерж╛ржХржЫрзЗ | Transaction fail | DB ржЪрзЗржХ ржХрж░рзБржи |
| Negative ржкржпрж╝рзЗржирзНржЯ | Min check ржмрзНржпрж░рзНрже | Logic ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи |
| Wrong calculation | Filter error | Reference ID ржЪрзЗржХ ржХрж░рзБржи |

---

## ЁЯУ▒ ржЗржЙржЖржЗ/ржЗржЙржПржХрзНрж╕ ржпрж╛ржЪрж╛ржЗржХрж░ржг

### ржмрж╛ржЯржи ржПржмржВ ржлрж░рзНржо ржПрж▓рж┐ржорзЗржирзНржЯ

```
ржкрзНрж░рждрж┐ржЯрж┐ ржлрж░рзНржорзЗрж░ ржЬржирзНржп ржЪрзЗржХ ржХрж░рзБржи:

тЬУ рж▓рзЛржбрж┐ржВ рж╕рзНржкрж┐ржирж╛рж░ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝
тЬУ ржмрж╛ржЯржи disable рж╣ржпрж╝ processing рж╕ржоржпрж╝
тЬУ ржПрж░рж░ ржорзЗрж╕рзЗржЬ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржпрж╝
тЬУ рж╕рж╛ржХрж╕рзЗрж╕ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝
тЬУ ржлрж░рзНржо рж░рж┐рж╕рзЗржЯ рж╣ржпрж╝ рж╕рж╛ржлрж▓рзНржпрзЗ
тЬУ ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржб рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ
```

### рж░рзЗрж╕ржкржирзНрж╕рж┐ржн ржбрж┐ржЬрж╛ржЗржи

```
ржЯрзЗрж╕рзНржЯ ржХрж░рзБржи:
тЬУ Desktop рж╕рж╛ржЗржЬрзЗ
тЬУ Tablet рж╕рж╛ржЗржЬрзЗ
тЬУ Mobile рж╕рж╛ржЗржЬрзЗ
тЬУ рж╕ржм ржбрзЗржЯрж╛ visible
тЬУ рж╕ржм ржлрж╛ржВрж╢ржирж╛рж▓рж┐ржЯрж┐ accessible
```

---

## ЁЯФД рж░рж┐ржЧрзНрж░рзЗрж╢ржи ржЯрзЗрж╕рзНржЯ

### ржкрзВрж░рзНржмржмрж░рзНрждрзА ржмрж┐ржХрзНрж░ржпрж╝рзЗрж░ рж╕рж╛ржерзЗ

```
ржЯрзЗрж╕рзНржЯ:
1. ржкрзБрж░ржирзЛ ржмрж┐ржХрзНрж░ржпрж╝ ржЦрзЛрж▓рзЗржи
2. Refund рждрзИрж░рж┐ ржХрж░рзБржи
3. рж╕ржорзНржкрзВрж░рзНржг ржХрж░рзБржи
4. ржкрзБрж░ржирзЛ ржмрж┐ржХрзНрж░ржпрж╝ cancelled ржжрзЗржЦрж╛ржмрзЗржи

ржЪрзЗржХ ржХрж░рзБржи:
тЬУ Historical data preserved
тЬУ Old audit trails intact
тЬУ No data loss
```

---

## ЁЯУИ ржкрж╛рж░ржлрж░ржорзНржпрж╛ржирзНрж╕ ржЯрзЗрж╕рзНржЯ

### рж╕рзНржкрзАржб ржорзЗржЬрж╛рж░ржорзЗржирзНржЯ

```javascript
// ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд рж╕ржоржпрж╝ ржкрж░рж┐ржорж╛ржк ржХрж░рзБржи:

1. Sales list load: < 2 sec
2. Refund create: < 1 sec
3. Refund approve: < 1 sec
4. Complete refund: < 2 sec
5. Stock update: < 1 sec
6. Points update: < 1 sec

тЬУ рж╕ржм deadline ржПрж░ ржоржзрзНржпрзЗ: Good
тЬЧ ржХрзЛржи operation slow: Investigation ржкрзНрж░ржпрж╝рзЛржЬржи
```

---

## ЁЯЫая╕П ржбрж┐ржмрж╛ржЧрж┐ржВ ржЯрзБрж▓рж╕ ржПржмржВ ржХржорж╛ржирзНржб

### Convex Dashboard ржП

```bash
# Database ржбрзЗржЯрж╛ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг
1. https://dashboard.convex.dev рж▓ржЧржЗржи ржХрж░рзБржи
2. ржЖржкржирж╛рж░ project рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи
3. Data tab ржЦрзЛрж▓рзЗржи
4. refunds table ржП ржХрзНрж▓рж┐ржХ ржХрж░рзБржи
5. рж╕ржм рж░рзЗржХрж░рзНржб ржжрзЗржЦрзБржи ржПржмржВ analyze ржХрж░рзБржи
```

### ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржХржирж╕рзЛрж▓

```javascript
// Convex client info ржжрзЗржЦрждрзЗ
console.log(convexClient)

// Current user info
console.log(currentUser)

// Error logging
console.error('Debug info:', data)
```

---

## тЬЕ ржЪрзВржбрж╝рж╛ржирзНржд рж╕ржВржЧрждрж┐ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

### ржкрзНрж░рждрж┐ржЯрж┐ рж░рж┐ржлрж╛ржирзНржб рж╕ржорзНржкрзВрж░рзНржгржХрж░ржгрзЗрж░ ржкрж░рзЗ

- [ ] Sale status changed to "cancelled"
- [ ] Sale рж╣рж┐ржбрзЗржи normal list ржерзЗржХрзЗ
- [ ] Stock increased рж╕ржарж┐ржХ ржкрж░рж┐ржорж╛ржг
- [ ] Stock рж╕ржм рж╢рж╛ржЦрж╛/global ржП ржорзНржпрж╛ржЪ ржХрж░рзЗ
- [ ] Customer loyalty points рж╣рзНрж░рж╛рж╕ ржкрзЗржпрж╝рзЗржЫрзЗ
- [ ] Points ржХржЦржиржУ negative ржиржпрж╝
- [ ] Refund status "completed"
- [ ] isReturned flag true
- [ ] All audit trails created
- [ ] All timestamps recorded
- [ ] User tracking complete
- [ ] No orphaned records
- [ ] UI properly updated
- [ ] No console errors

---

## ЁЯУЮ рж╕ржорж░рзНржержи рждржерзНржп

ржпржжрж┐ рж╕ржорж╕рзНржпрж╛ ржкрж╛ржи:

1. **ржкрзНрж░ржержо**: ржПржЗ ржЧрж╛ржЗржб ржкржбрж╝рзБржи
2. **ржжрзНржмрж┐рждрзАржпрж╝**: Console error ржирзЛржЯ ржХрж░рзБржи
3. **рждрзГрждрзАржпрж╝**: Audit trail ржЪрзЗржХ ржХрж░рзБржи
4. **ржЪрждрзБрж░рзНрже**: Network tab ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рзБржи
5. **ржкржЮрзНржЪржо**: Database ржбрзЗржЯрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рзБржи

---

**рж╕рж░рзНржмрж╢рзЗрж╖ ржЖржкржбрзЗржЯ**: January 31, 2026
**ржЧрж╛ржЗржб рж╕ржВрж╕рзНржХрж░ржг**: 1.0 - Comprehensive
**рж╕рзНржерж┐рждрж┐**: Ready for Testing

